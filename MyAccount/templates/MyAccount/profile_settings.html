{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Settings</title>
    <link rel="stylesheet" href="{% static 'MyAccount/myaccount.css' %}">
</head>
<body>

    <div class="HeaderDiv">
        <h1>PROFILE</h1>
    </div>

    <!-- Navigation Buttons -->
    <button onclick="window.location.href='{% url 'Dashboard:user_dash' %}'">User Dashboard</button>

    <div class="BodyDiv">
        <h2>Hello {{ user.f_name }} {{ user.l_name }}</h2>
        
        <!-- Displaying basic user information -->
        <p><strong>Name:</strong> {{ user.f_name }} {{ user.l_name }}</p>
        <p><strong>Username:</strong> {{ user.u_name }}</p>n
        <p><strong>Birthday:</strong> {{ user.dob }}</p>
        <p><strong>Gender:</strong> {{ user.gender }}</p>

        <!-- Profile Photo -->
        <h3>Profile Photo</h3>

        {% if user.photo %}
            <p>Current Profile Photo:</p>
            <img src="{{ user.photo.url }}" alt="Profile Photo" width="150" height="150">
            <br>
        {% else %}
            <p>No profile photo uploaded.</p>
        {% endif %}

        <form method="POST" enctype="multipart/form-data" action="{% url 'MyAccount:change_profile_photo' %}">
            {% csrf_token %}
            <label for="new_photo">Upload New Profile Photo:</label>
            <input type="file" name="new_photo" accept="image/*"><br>
            <button type="submit">Upload Photo</button>
        </form>

        {% if user.photo %}
            <form method="POST" action="{% url 'MyAccount:delete_profile_photo' %}">
                {% csrf_token %}
                <button type="submit">Delete Profile Photo</button>
            </form>
        {% endif %}

        <!-- Profile Bio -->
        <h3>Profile Bio</h3>
        <form method="POST" action="{% url 'MyAccount:change_bio' %}">
            {% csrf_token %}
            <label for="new_bio">Profile Bio:</label><br>
            <textarea name="new_bio" rows="4" cols="50">{{ user.bio }}</textarea><br>
            <button type="submit">Update Bio</button>
        </form>

        <!-- Change Username -->
        <h3>Change Username</h3>
        <form method="POST" action="{% url 'MyAccount:change_username' %}">
            {% csrf_token %}
            <label for="new_username">New Username:</label>
            <input type="text" name="new_username" value="{{ user.u_name }}"><br>
            <button type="submit">Change Username</button>
        </form>

        <!-- Change Password -->
        <h3>Change Password</h3>
        <form method="POST" action="{% url 'MyAccount:change_password' %}">
            {% csrf_token %}
            <div>
                <label for="old_password">Old Password:</label>
                <input type="password" id="old_password" name="old_password" required>
            </div>
            <div>
                <label for="new_password">New Password:</label>
                <input type="password" id="new_password" name="new_password" required>
            </div>
            <div>
                <label for="confirm_password">Confirm New Password:</label>
                <input type="password" id="confirm_password" name="confirm_password" required>
            </div>
            <button type="submit">Change Password</button>
        </form>

    </div>

</body>
</html>